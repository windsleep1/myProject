<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .container {
            width: 100%;
            height: 100vh;
            background-color: black;
            display: flex;
            /* 让顶,中,底三个区域垂直均匀排列,各占三分之一的空间 */
            flex-direction: column;
            justify-content: space-between;
        }

        .box {
            width: 100%;
            overflow: hidden;
        }

        #topImgBox,
        #midImgBox,
        #bottomImgBox {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            height: 100%;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
        }

        .topImg,
        .midImg,
        .bottomImg {
            width: 200px;
            height: 200px;
            object-fit: cover;
            object-position: center;
            flex-shrink: 0;
            /* 防止图片被压缩 */
            margin-right: 20px;
        }

        .midImg {
            margin-left: 40px;
        }
        
        /* 主要人像 */
        .main {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translate(-50%, 0%);
            width: 500px;
            height: 500px;
        }
        .main img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="box">
            <div id="topImgBox">
                <!-- 顶部7张图片 -->
            </div>
        </div>
        <div class="box">
            <div id="midImgBox">
                <!-- 中间7张图片 -->
            </div>
        </div>
        <div class="box">
            <div id="bottomImgBox">
                <!-- 底部7张图片 -->
            </div>
        </div>
        <div class="main">
            <img src="./picture/main.png" alt="">
        </div>
    </div>
</body>
<script>
    // 配置每个区域的滚动方向：
    // 'left'  : 容器向左移动
    // 'right' : 容器向右移动
    const scrollConfig = {
        top: { direction: 'left' },
        mid: { direction: 'right' },
        bottom: { direction: 'right' }
    };

    // 图片固定宽度（应与 CSS 中设置的宽度一致）
    const IMG_WIDTH = 200;

    // 工具函数：为容器添加图片
    function addImages(containerId, folder, count, className) {
        const container = document.getElementById(containerId);
        for (let i = 1; i <= count; i++) {
            const img = document.createElement('img');
            img.src = `./picture/${folder}/${i}.jpg`;  // 请确保路径正确
            img.alt = '';
            img.className = className;
            container.appendChild(img);
        }
    }

    // 工具函数：克隆图片以实现无缝循环
    function duplicateImagesForDirection(containerId, direction) {
        const container = document.getElementById(containerId);
        const images = Array.from(container.children);
        // 克隆图片追加到末尾
        images.forEach(img => {
            const clone = img.cloneNode(true);
            container.appendChild(clone);
        });

    }

    // 添加原始图片
    addImages('topImgBox', 'top', 7, 'topImg');
    addImages('midImgBox', 'mid', 6, 'midImg');
    addImages('bottomImgBox', 'bottom', 7, 'bottomImg');

    // 计算每个区域原始图片总宽度
    const totalWidth = {
        top: 7 * IMG_WIDTH + 20 * 7,
        mid: 6 * IMG_WIDTH + 20 * 6,
        bottom: 7 * IMG_WIDTH + 20 * 7
    };

    // 为每个区域克隆图片
    duplicateImagesForDirection('topImgBox', scrollConfig.top.direction);
    duplicateImagesForDirection('midImgBox', scrollConfig.mid.direction);
    duplicateImagesForDirection('bottomImgBox', scrollConfig.bottom.direction);

    // 为每个区域创建并应用动画
    function applyAnimation(containerId, direction, totalWidth) {
        const container = document.getElementById(containerId);
        // 移除可能已有的动画
        container.style.animation = 'none';
        // 强制重绘
        void container.offsetWidth;

        // 确定位移值
        const translateValue = -totalWidth;
        // 创建唯一的 keyframes 名称
        const keyframesName = `scroll_${containerId}`;
        // 创建 keyframes 规则(left时从0开始，right时从-totalWidth开始)
        if (direction === 'left') {
            const keyframesL = `
                @keyframes ${keyframesName} {
                    0% { transform: translateX(0); }
                    100% { transform: translateX(${translateValue}px); }
                }
            `;
            // 将 keyframes 添加到样式表
            const styleSheetL = document.createElement('style');
            styleSheetL.textContent = keyframesL;
            document.head.appendChild(styleSheetL);
        } else {
            const keyframesR = `
                @keyframes ${keyframesName} {
                    0% { transform: translateX(${translateValue}px); }
                    100% { transform: translateX(0); }
                }
            `;
            // 将 keyframes 添加到样式表
            const styleSheetR = document.createElement('style');
            styleSheetR.textContent = keyframesR;
            document.head.appendChild(styleSheetR);
        }



        // 应用动画（时长20秒，可根据需要调整）
        container.style.animation = `${keyframesName} 30s linear infinite`;
    }

    // 应用配置
    applyAnimation('topImgBox', scrollConfig.top.direction, totalWidth.top);
    applyAnimation('midImgBox', scrollConfig.mid.direction, totalWidth.mid);
    applyAnimation('bottomImgBox', scrollConfig.bottom.direction, totalWidth.bottom);
</script>

</html>